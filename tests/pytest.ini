[pytest]
# Configuração moderna de pytest

# Diretórios de teste
testpaths = tests
pythonpath = src

# Padrões de descoberta de testes
python_files = test_*.py *_test.py
python_classes = Test* *Tests
python_functions = test_*

# Markers customizados para categorização
markers =
    unit: Testes unitários (models, parsers individuais)
    integration: Testes de integração (processamento completo)
    cli: Testes de interface de linha de comando
    exporters: Testes de exportadores (JSON, CSV)
    cielo03: Testes específicos para arquivo CIELO03
    cielo04: Testes específicos para arquivo CIELO04
    cielo09: Testes específicos para arquivo CIELO09
    cielo15: Testes específicos para arquivo CIELO15
    cielo16: Testes específicos para arquivo CIELO16
    pix: Testes relacionados a Pix
    negociacao: Testes de negociação de recebíveis
    slow: Testes lentos (podem ser skipados em CI rápido)
    smoke: Testes de fumaça (execução rápida)
    edge_case: Testes de casos extremos
    validation: Testes de validação Pydantic

# Opções padrão
addopts =
    -v
    --strict-markers
    --tb=short
    --disable-warnings
    -ra
    --color=yes

# Cobertura (quando pytest-cov instalado)
# --cov=cielo_edi
# --cov-report=term-missing
# --cov-report=html

# Diretórios a ignorar
norecursedirs = .git .tox dist build *.egg .venv venv

# Configuração de log
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Timeout para testes (se pytest-timeout instalado)
# timeout = 300
# timeout_method = thread

# Configuração de xdist para testes paralelos (se pytest-xdist instalado)
# -n auto